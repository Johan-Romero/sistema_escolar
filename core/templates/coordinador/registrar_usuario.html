{% extends "layout/base_coordinador.html" %}

{% block title %}Registrar Usuario{% endblock %}

{% block content %}

<div class="bg-white p-8 rounded-lg shadow-md mb-8">
  <h1 class="text-3xl font-bold text-gray-800 mb-2">Registrar Nuevo Usuario</h1>
  <p class="text-gray-600 text-lg">Completa los datos personales y de cuenta para crear un nuevo perfil en el sistema.</p>
</div>

{# Tarjeta principal para el formulario con más espacio #}
<form method="POST" class="bg-white p-8 rounded-lg shadow-xl border border-gray-200">
  {% csrf_token %}

  {# Sección: Datos personales #}
  <div class="mb-10"> {# Margen inferior para separar secciones #}
    <h3 class="text-2xl font-semibold text-gray-800 border-b pb-3 mb-6">Datos Personales</h3> {# Título de sección #}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> {# Grid responsivo #}
      {% for field in persona_form %}
        <div>
          <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1.5">{{ field.label }}</label>
          <input type="{{ field.widget_type|default:'text' }}" 
                 name="{{ field.name }}" 
                 id="{{ field.id_for_label }}"
                 class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-base"
                 {% if field.value %}value="{{ field.value }}"{% endif %}
                 {% if field.field.required %}required{% endif %}
                 {% if field.field.widget.attrs.placeholder %}placeholder="{{ field.field.widget.attrs.placeholder }}"{% endif %}
                 {# Iterar sobre cualquier otro atributo definido en el widget attrs #}
                 {% for attr, value in field.field.widget.attrs.items %}
                     {% if attr != 'class' and attr != 'id' and attr != 'name' and attr != 'type' and attr != 'value' and attr != 'placeholder' %}
                         {{ attr }}="{{ value }}" 
                     {% endif %}
                 {% endfor %}
          >
          {% if field.errors %}
            <p class="text-red-600 text-sm mt-1">{{ field.errors.0 }}</p>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>

  {# Sección: Datos de usuario #}
  <div class="mb-10">
    <h3 class="text-2xl font-semibold text-gray-800 border-b pb-3 mb-6">Datos de Cuenta</h3> {# Título de sección #}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6"> {# Grid de 2 columnas para campos de usuario #}
      {% for field in usuario_form %}
        <div>
          <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1.5">{{ field.label }}</label>
          <input type="{{ field.widget_type|default:'text' }}" 
                 name="{{ field.name }}" 
                 id="{{ field.id_for_label }}"
                 class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-base"
                 {% if field.value %}value="{{ field.value }}"{% endif %}
                 {% if field.field.required %}required{% endif %}
                 {% if field.field.widget.attrs.placeholder %}placeholder="{{ field.field.widget.attrs.placeholder }}"{% endif %}
                 {% for attr, value in field.field.widget.attrs.items %}
                     {% if attr != 'class' and attr != 'id' and attr != 'name' and attr != 'type' and attr != 'value' and attr != 'placeholder' %}
                         {{ attr }}="{{ value }}" 
                     {% endif %}
                 {% endfor %}
          >
          {% if field.help_text %}
            <p class="text-xs text-gray-500 mt-1">{{ field.help_text|safe }}</p>
          {% endif %}
          {% if field.errors %}
            <p class="text-red-600 text-sm mt-1">{{ field.errors.0 }}</p>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>

  {# Errores generales del formulario #}
  {% if form.non_field_errors %}
    <div class="text-red-600 text-sm mb-4 text-center">
        {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
        {% endfor %}
    </div>
  {% endif %}

  {# Botón de registro y enlace de volver #}
  <div class="flex flex-col sm:flex-row justify-between items-center mt-8 pt-6 border-t border-gray-100"> {# Espacio superior y borde #}
    <a href="{% url 'panel_coordinador' %}" class="text-blue-600 hover:underline text-base mb-4 sm:mb-0">
      ← Volver al Panel del Coordinador
    </a>
    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-md transition duration-200 ease-in-out shadow-lg hover:shadow-xl w-full sm:w-auto"> {# Botón más grande #}
      Registrar Usuario
    </button>
  </div>
</form>

{% endblock %}